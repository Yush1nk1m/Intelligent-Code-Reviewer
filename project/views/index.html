<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Intelligent Code Reviewer</title>
    <style>
        body {
            font-family: 'Consolas', sans-serif;
            margin: 20px;
            background-color: #f0f8ff; /* ë°°ê²½ìƒ‰ì„ ì—°í•œ í•˜ëŠ˜ìƒ‰ìœ¼ë¡œ ì„¤ì • */
        }
        #header {
            font-size: 28px;
            margin-bottom: 20px;
            color: #4B0082; /* ì œëª© ìƒ‰ìƒì„ ì§„ë³´ë¼ìƒ‰ìœ¼ë¡œ ì„¤ì • */
        }
        #codeSection, #reviewSection, #variableNameSection {
            margin-bottom: 20px;
            border-radius: 10px; /* ì„¹ì…˜ì˜ ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
            box-shadow: 0 0 10px rgba(0,0,0,0.1); /* ì„¹ì…˜ì— ê·¸ë¦¼ì íš¨ê³¼ ì¶”ê°€ */
            background-color: #ffffff; /* ì„¹ì…˜ ë°°ê²½ìƒ‰ì„ í°ìƒ‰ìœ¼ë¡œ */
            padding: 20px; /* ì„¹ì…˜ ì•ˆìª½ ì—¬ë°± ì¶”ê°€ */
        }
        textarea {
            width: 100%;
            height: 150px;
            font-size: 16px;
            margin-bottom: 10px;
            tab-size: 4;
            border-radius: 5px; /* í…ìŠ¤íŠ¸ ì˜ì—­ì˜ ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
            border: 1px solid #ccc; /* í…Œë‘ë¦¬ ìƒ‰ìƒ ì„¤ì • */
            padding: 10px; /* í…ìŠ¤íŠ¸ ì˜ì—­ ì•ˆìª½ ì—¬ë°± ì¶”ê°€ */
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ì„ ì—°ë‘ìƒ‰ìœ¼ë¡œ */
            color: white; /* ë²„íŠ¼ ê¸€ì ìƒ‰ìƒì„ í°ìƒ‰ìœ¼ë¡œ */
            border: none;
            border-radius: 5px; /* ë²„íŠ¼ì˜ ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
            cursor: pointer; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ì‹œ ì»¤ì„œ ë³€ê²½ */
        }
        button:hover {
            background-color: #45a049; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ì‹œ ë²„íŠ¼ ë°°ê²½ìƒ‰ ë³€ê²½ */
        }
        .list-section {
            background-color: #fafafa; /* ëª©ë¡ ì„¹ì…˜ì˜ ë°°ê²½ìƒ‰ì„ ì—°í•œ íšŒìƒ‰ìœ¼ë¡œ */
            padding: 15px;
            border-radius: 5px; /* ëª©ë¡ ì„¹ì…˜ì˜ ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
        }
        li {
            margin: 10px 0;
            list-style-type: none; /* ëª©ë¡ ìŠ¤íƒ€ì¼ ì œê±° */
            background-color: #e7e7e7; /* ëª©ë¡ í•­ëª© ë°°ê²½ìƒ‰ ì„¤ì • */
            padding: 10px;
            border-radius: 5px; /* ëª©ë¡ í•­ëª© ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
        }
    </style>
</head>
<body>
    <div id="header">Intelligent Code Reviewer ğŸ§ </div>
    
    <div id="codeSection">
        <textarea id="codeInput"></textarea><br>
        <button onclick="submitCode()">ë¶„ì„</button>
    </div>

    <div id="reviewSection" class="list-section"></div>
    <div id="variableNameSection" class="list-section"></div>

    <script>

        document.getElementById('codeInput').addEventListener('keydown', function(e) {
            // íƒ­ í‚¤ë¥¼ ëˆŒë €ì„ ê²½ìš°ì˜ ë™ì‘
            if (e.key === 'Tab') {
                // ê¸°ë³¸ ë™ì‘ì„ ë°©ì§€ (íƒ­ ì´ë™)
                e.preventDefault();
                // íƒ­ ë¬¸ì(ë³´í†µ 4ê°œì˜ ê³µë°±)ë¥¼ ì‚½ì…
                var start = this.selectionStart;
                var end = this.selectionEnd;

                // ì´ ë¶€ë¶„ì€ textareaì— íƒ­ ë¬¸ìë¥¼ ì‚½ì…
                this.value = this.value.substring(0, start) + "\t" + this.value.substring(end);

                // ì»¤ì„œë¥¼ íƒ­ ë¬¸ì ë’¤ë¡œ ì´ë™
                this.selectionStart = this.selectionEnd = start + 1;
            }
        });

        async function submitCode() {
            const code = document.getElementById('codeInput').value;
            console.log(code);
            const response = await fetch('/code', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ code: code }),
            });
            const result = await response.json();
            displayReviews(result.reviews);
            displayVariableNames(result.recommendedVarNames);
        }

        function displayReviews(reviews) {
            const section = document.getElementById('reviewSection');
            section.innerHTML = '<h3>ì½”ë“œ ë¦¬ë·°</h3>';
            const list = document.createElement('ul');
            reviews.forEach(review => {
                const item = document.createElement('li');
                item.textContent = review.content;
                list.appendChild(item);
            });
            section.appendChild(list);
        }

        function displayVariableNames(varNames) {
            const section = document.getElementById('variableNameSection');
            section.innerHTML = '<h3>ëŒ€ì²´ ë³€ìˆ˜ëª… ì¶”ì²œ</h3>';
            const list = document.createElement('ul');
            varNames.forEach(varName => {
                const item = document.createElement('li');
                item.textContent = `${varName.original} -> ${varName.new}`;
                list.appendChild(item);
            });
            section.appendChild(list);
        }
    </script>
</body>
</html>
